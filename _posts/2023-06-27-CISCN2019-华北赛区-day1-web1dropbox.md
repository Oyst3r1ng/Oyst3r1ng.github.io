---
layout: mypost
title: "CISCN2019-华北赛区-day1-web1dropbox"
categories: [ctf_wp]
---

这个题就是将之前我那几篇关于反序列化的思考与情景相结合，虽然有的地方仍然有点刻意，但不愧是国赛，出的题很有水平。可能和别的wp不太一样，会把做题时候思考的过程给记录下来......

1.这题打开页面是一个登录框，而且既有注册又有登录，脑子里面闪了一下二次注入，但仔细一想单凭这个肯定还没有涉及到从数据库里面直接拿数据，这两个功能点肯定是不存在注入点的，然后注册了一个admin的账号，登进去后发现在页面的右上角出现了你好 admin。



下意识反应这个admin有木有可能是从数据库直接带出来的，不过Fuzz 用户名后，并没有报错之类的，那基本上判断这个题与这方面无关了，然后查看源码以及开disearch扫后也并没有发现可疑的信息......

2.一般这样都没结果的话，抓包分析，毕竟功能点很简单，就是一个上传文件，然后上传了文件还有一个下载文件的功能点，然后这个上传文件的话，会有一个文件后缀的限制。


这个不好绕，一个白名单限制，上传图片马，但是解析不成php，文件上传无果，下载处有任意文件下载漏洞。


然后就把它源码里面include的源码文件都下载下来，以及一些register.php文件啥的按照功能点猜名字的也全部下载下来，大概就是下面图片里面这几个，忽略那个phar文件，其他几个php的文件都是用这个任意文件下载漏洞下载的


