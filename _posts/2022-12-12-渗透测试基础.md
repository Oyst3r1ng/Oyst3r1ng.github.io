---
layout: mypost
title: "渗透测试基础"
categories: [web安全]
---

## 渗透测试开山

### 介绍

渗透测试 (penetration test)并没有一个标准的定义，国外一些安全组织达成共识的通用说法是：渗透测试是通过模拟恶意黑客的攻击方法，来评估计算机网络系统安全的一种评估方法。这个过程包括对系统的任何弱点、技术缺陷或漏洞的主动分析，这个分析是从一个攻击者可能存在的位置来进行的，并且从这个位置有条件主动利用安全漏洞。

换句话来说，渗透测试是指渗透人员在不同的位置（比如从内网、从外网等位置）利用各种手段对某个特定网络进行测试，以期发现和挖掘系统中存在的漏洞，然后输出渗透测试报告，并提交给网络所有者，网络所有者根据渗透人员提供的渗透测试报告，可以清晰知晓系统中存在的安全隐患和问题。

阐述一下总体的过程：现在一台服务器可能会开有好多好多的服务，比如Web服务，FTP服务，和一些中间件服务，3389等等，这些服务可能都是存在一些漏洞的，只要利用的到位，每一个服务都可能拿到这台服务器的权限，但Web服务方面相比于其他服务的漏洞是更多的，所以我们一般会从Web服务方面入手去渗透打点，当拿到一台服务器权限后，我们就可以在内网里面**横向渗透**（就是看与这台服务器同一网段有什么机器）或者是**纵向渗透**（一个公司肯定不可能是一个网段，纵向渗透就是看别的网段，这个可能就要找到一台双网卡的机器），这样一来就在内网相当于漫游了，中间逐步去收集这个公司的一些重要资产，渗透测试就是模拟黑客从公司的网络边缘地带到核心地带一步一步去测试有无漏洞，渗透测试完了，反过来再去生成报告，记录每一步是否安全的，并提出修复建议。

### 渗透测试注意事项

- 不要进行恶意攻击，不要做傻事，考虑你的行为将会带来的后果
- 在没有获得书面授权时，不要攻击任何目标  
- 遵循国家法律法规，如果你干了非法的是，天网恢恢疏而不漏
  
### 运行程序的一些快捷指令

- cmd：这个用shell
- calc：这个弹计算器
- mspaint：这个弹画板
- control：这个是控制面板
- inetmgr：这个在服务器系统的话，会弹出服务器控制面板
- uac：就是按下win键，然后搜索uac，这个就是平时运行某些程序时，需不需要管理员权限

## 安全术语介绍

- 脚本（asp,php,jsp）：这个就是网站服务器上跑的一些语言
- html（css，js，html）：这是就是前端语言，前端页面展示的这些，浏览器直接f12就能看到
- HTTP协议：浏览器发送信息到服务器就是走的这个协议，后面抓包的时候就会看到 这里说到HTTP协议里面的Host参数，Host参数就是可以记录目的ip地址端口，以及访问域名什么的，这里简单举个栗子：目前很多一个ip对应多个域名的情况（nginx虚拟主机的实现原理），在http请求头中有host字段，该字段默认为请求的url 也可以自己设定，当我们发送一个请求时，先通过DNS域名解析，得到ip，然后建立tcp连接，当服务器（以nginx为例）收到请求时，就会解析http请求host字段来判断你是访问的那个server配置下的代码，这样 就可以实现在一个服务器上通过http的host字段实现虚拟服务器，不然就太浪费服务器资源了，这也是一种很常见的搭建旁站的思路
- CMS和框架：CMS就是成品房子，框架就是没有砖的房子 这里有个比较骚气的方法，其实就和蜜罐一样，就是找一个老域名，搞一台服务器，然后在这台服务器上面去搭建各种版本的各种框架的网站，说不定哪天0day去做批量测试的时候，你就能捕获到这个0day，然后用别人发现的0day去攻击其他网站，或者是去做一些预防措施
- 黑盒白盒：黑盒就是不知道源代码，盲测漏洞，白盒就是去审计源代码去发现漏洞
- MD5/加盐（salt）：就是一种加密的算法，这个一般在网站用户密码管理员密码用的较多，都是这样子加密的，一些网站防止密码破解的话，会做以下一些措施
  - 密码复杂化，这个很复杂的话那也没办法，但一般的话管理员都会有多个账号，这个破解不出来换一个
  - md5值复杂化，可能就是一个很简单的一个密码，MD5加密后也能破解出来，但是有的网站会在加密后的字符串里面去加了点字符，干扰破解，可能正常情况下md5是16位或者是32位的，那得到一个20位的加密字符串，就要kaolv是不是做了混淆
  - 加盐，所谓加盐的意思就是，比如12345加密完后是qwerty，但是又会将qwerty+67890再进行一次MD5，得到一个wertyu，最终数据库里面储存的也是wertyu，这个破解的话，其实有这个salt就行，而这个salt一般数据库那个表名就叫salt，就是一般在数据库里面一些奇怪的字符串就可能是salt，这个在cmd5那个网站上也有相关的破解方法，最多的可能就是那个joomla和dz加盐方式
- 肉鸡，抓鸡，ddos，cc：肉鸡就是你的机器已经被控制了，抓鸡就是控制你的机器，ddos就是发动大量的肉鸡去攻击服务器，当然这只是其中一种攻击方式，还可以泛洪之类的，cc就是走代理，然后访问服务器，耗CPU的资源，代理就是和burpsuite抓包一个道理，访问服务器记录的是代理的IP，而不是真实IP，可以爬虫爬免费代理，也可以买代理池
- rookit：就是系统内核级后门，权限维持的东西，很难被发现的后门
- poc&exp：poc就是指漏洞验证，exp就是指漏洞利用，msf里面也会有这个

## 搭建安全测试环境

### Vmware虚拟机的安装和使用

这个下载好，个人用的是Vmware16.0pro，然后再网上下所要的虚拟机镜像即可（就是那个iso文件）,然后安装就行，跟上网上的步骤一步一步走就行，这里重点还是来说一下关于虚拟机上网的一些东西，这里在日后搭建域环境的时候也是一定要知道的，就说三种比较常见的吧，也在网上找了一些拓朴图。

